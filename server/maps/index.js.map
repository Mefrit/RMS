{"version":3,"sources":["../../source/nodeserver/index.ts"],"names":[],"mappings":";;AAAA,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAE7B,MAAM,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;AAE3B,+CAA4C;AAC5C,uDAAuE;AAEvE,MAAM,OAAO,GAAG,gBAAgB,CAAC;AACjC,MAAM,WAAW,GAAG,IAAI,yBAAW,CAAC,OAAO,CAAC,CAAC;AAE7C,IAAI,CAAC,YAAY,CAAC,UAAU,OAAO,EAAE,QAAQ;IACzC,IAAI,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAC5B,SAAS,GAAG,EAAE,CAAC;IAEnB,IAAI,GAAG,CAAC,QAAQ,IAAI,GAAG,EAAE;QAErB,QAAQ,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE,CAAC,CAAC;QAEhE,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE;YACxB,SAAS,IAAI,IAAI,CAAC;QACtB,CAAC,CAAC,CAAC;QAEH,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,GAAG,EAAE;YACnB,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAClC,MAAM,WAAW,GAAG,IAAA,sBAAU,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAG1C,WAAW,CAAC,UAAU,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;gBACzD,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;gBACrC,QAAQ,CAAC,GAAG,EAAE,CAAC;YACnB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;KAIN;SAAM;QACH,IAAA,4BAAgB,EAAC,OAAO,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;KAC5C;AACL,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAChB,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC","file":"../index.js","sourcesContent":["const http = require(\"http\");\r\n\r\nconst url = require(\"url\");\r\n\r\nimport { Application } from \"./Application\";\r\nimport { load_static_file, getUrlInfo } from \"./modules/lib/functions\";\r\n\r\nconst path2db = \"./database.db3\";\r\nconst application = new Application(path2db);\r\n\r\nhttp.createServer(function (request, response) {\r\n    var uri = url.parse(request.url),\r\n        post_data = \"\";\r\n\r\n    if (uri.pathname == \"/\") {\r\n        // FIX ME как то покруче сделать\r\n        response.writeHead(200, { \"Content-Type\": \"application/json\" });\r\n\r\n        request.on(\"data\", (data) => {\r\n            post_data += data;\r\n        });\r\n\r\n        request.on(\"end\", () => {\r\n            post_data = JSON.parse(post_data);\r\n            const module_info = getUrlInfo(uri.query);\r\n\r\n            // console.log(\"module_info \\n\\n\", module_info);\r\n            application.loadModule(module_info, post_data).then((data) => {\r\n                response.write(JSON.stringify(data));\r\n                response.end();\r\n            });\r\n        });\r\n\r\n        // response.close\r\n        // response.json(JSON.stringify({ result: \"ok111111111\" }));\r\n    } else {\r\n        load_static_file(request, response, uri);\r\n    }\r\n}).listen(3000);\r\nconsole.log(\"run server on 3000 port\");\r\n//# sourceMappingURL=maps/index.js.map\r\n"]}