{"version":3,"sources":["../../source/nodeserver/modules/lib/stemmer.ts"],"names":[],"mappings":"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","file":"../../../modules/lib/stemmer.js","sourcesContent":["\r\n//    var $PERFECTIVEGROUND = new RegExp ('((ив|ивши|ившись|ыв|ывши|ывшись)((?<=[ая])(в|вши|вшись)))$'); \r\nvar PERFECTIVEGROUND = new RegExp('((ив|ивши|ившись|ыв|ывши|ывшись)(([ая]?)(в|вши|вшись)))$');\r\nvar REFLEXIVE = new RegExp('(с[яь])$');\r\nvar ADJECTIVE = new RegExp('(ее|ие|ые|ое|ими|ыми|ей|ий|ый|ой|ем|им|ым|ом|его|ого|ему|ому|их|ых|ую|юю|ая|яя|ою|ею)$');\r\n//    var $PARTICIPLE = new RegExp ('((ивш|ывш|ующ)|((?<=[ая])(ем|нн|вш|ющ|щ)))$'); \r\nvar PARTICIPLE = new RegExp('((ивш|ывш|ующ)|(([ая]?)(ем|нн|вш|ющ|щ)))$');\r\n//var VERB = new RegExp ('((ила|ыла|ена|ейте|уйте|ите|или|ыли|ей|уй|ил|ыл|им|ым|ен|ило|ыло|ено|ят|ет|уют|ит|ыт|ены|ить|ыть|ишь|ую|ю)|((?<=[ая])(ла|на|ете|йте|лий|л|ем|н|ло|но|ет|ют|ны|ть|ешь|нно)))$'); \r\nvar VERB = new RegExp('((ила|ыла|ена|ейте|уйте|ите|или|ыли|ей|уй|ил|ыл|им|ым|ен|ило|ыло|ено|ят|ет|уют|ит|ыт|ены|ить|ыть|ишь|ую|ю)|(([ая]?)(ла|на|ете|йте|лий|л|ем|н|ло|но|ет|ют|ны|ть|ешь|нно)))$');\r\nvar NOUN = new RegExp('(а|ев|ов|ие|ье|е|иями|ями|ами|еи|ии|и|ией|ей|ой|ий|й|иям|ям|ием|ем|ам|ом|о|у|ах|иях|ях|ы|ь|ию|ью|ю|ия|ья|я)$');\r\nvar RVRE = new RegExp('^(.*?[аеиоуыэюя])(.*)$');\r\n//    var $DERIVATIONAL = new RegExp ('[^аеиоуыэюя][аеиоуыэюя]+[^аеиоуыэюя]+[аеиоуыэюя].*(?<=о)сть?$'); \r\nvar DERIVATIONAL = new RegExp('[^аеиоуыэюя][аеиоуыэюя]+[^аеиоуыэюя]+[аеиоуыэюя].*(о?)сть?$');\r\nfunction s($s, $re, $to) {\r\n    return $s.replace($re, $to);\r\n}\r\nfunction m($s, $re) {\r\n    return $s.match($re);\r\n}\r\nexport function stem(word) {\r\n    var stem = word;\r\n    do {\r\n        var p = m(word, RVRE);\r\n        if (!p || p.length != 3) break; // Выход из блока :)        \r\n        var start = p[1];\r\n        var rv = p[2];\r\n\r\n        // Step 1 \r\n        var rvx = s(rv, PERFECTIVEGROUND, '');\r\n        if (rvx == rv) {\r\n            rv = s(rvx, REFLEXIVE, '');\r\n            rvx = s(rv, ADJECTIVE, '');\r\n\r\n            if (rvx != rv) {\r\n                rv = s(rvx, PARTICIPLE, '');\r\n            } else {\r\n                var rvy = s(rvx, VERB, '')\r\n\r\n\r\n                if (rvy == rvx) {\r\n                    rv = s(rvy, NOUN, '');\r\n                } else {\r\n                    rv = rvy;\r\n                }\r\n            }\r\n        } else {\r\n            rv = rvx;\r\n        }\r\n\r\n        // Step 2 \r\n        rv = s(rv, new RegExp('и$'), '');\r\n\r\n        // Step 3 \r\n        if (m(rv, DERIVATIONAL)) {\r\n            rv = s(rv, new RegExp('ость?$'), '');\r\n        }\r\n\r\n        // Step 4 \r\n        rvx = s(rv, new RegExp('ь$'), '')\r\n        if (rvx == rv) {\r\n            rv = s(rvx, new RegExp('ейше?'), '');\r\n            rv = s(rv, new RegExp('нн$'), 'н');\r\n        } else {\r\n            rv = rvx;\r\n        }\r\n\r\n        stem = start + rv;\r\n    } while (false);\r\n    return stem;\r\n}\r\n\r\n"]}